<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Installing and Loading R Packages for Reproducible Workflows • Require</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Installing and Loading R Packages for Reproducible Workflows">
<meta name="description" content="A single key function, Require that makes rerun-tolerant versions of install.packages and `require` for CRAN packages, packages no longer on CRAN (i.e., archived), specific versions of packages, and GitHub packages. This approach is developed to create reproducible workflows that are flexible and fast enough to use while in development stages, while able to build snapshots once a stable package collection is found. As with other functions in a reproducible workflow, this package emphasizes functions that return the same result whether it is the first or subsequent times running the function, with subsequent times being sufficiently fast that they can be run every time without undue waiting burden on the user or developer.">
<meta property="og:description" content="A single key function, Require that makes rerun-tolerant versions of install.packages and `require` for CRAN packages, packages no longer on CRAN (i.e., archived), specific versions of packages, and GitHub packages. This approach is developed to create reproducible workflows that are flexible and fast enough to use while in development stages, while able to build snapshots once a stable package collection is found. As with other functions in a reproducible workflow, this package emphasizes functions that return the same result whether it is the first or subsequent times running the function, with subsequent times being sufficiently fast that they can be run every time without undue waiting burden on the user or developer.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">Require</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/Require.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PredictiveEcology/Require/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="require">Require<a class="anchor" aria-label="anchor" href="#require"></a>
</h1></div>
<!-- badges start -->
<p><a href="https://cran.r-project.org/package=Require" class="external-link"><img src="https://www.r-pkg.org/badges/version/Require" alt="CRAN_Status_Badge"></a> <a href="https://cran.r-project.org/package=Require" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/Require" alt="CRAN Downloads"></a> <a href="https://github.com/PredictiveEcology/Require/actions" class="external-link"><img src="https://github.com/PredictiveEcology/Require/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <!-- badges: end --></p>
<p><code>Require</code> is a single package that combines features of <code>base::install.packages</code>, <code><a href="https://rdrr.io/r/base/library.html" class="external-link">base::library</a></code>, <code><a href="https://rdrr.io/r/base/library.html" class="external-link">base::require</a></code>, as well as <code><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pak::pkg_install</a></code>, <code>remotes::install_github</code>, and <code>versions::install_version</code>, plus the snapshotting capabilities of <code>renv</code>. It takes its name from the idea that a user could simply have one line like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"lmer"</span>, <span class="st">"PredictiveEcology/LandR@development"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>named after the <code>require</code> function, that would load packages. But with <code>Require</code>, it will also install the packages, if necessary. Set it and forget it. This makes if <em>very clear</em> what packages are being used in a project. <code>Require</code> also continues to work, even if packages are taken off CRAN. This means that even if there is a dependency that is removed from CRAN (“archived”), the line will still work. Because it can be done in one line, it becomes relatively easy to share, it is transparent, and facilitates reproducibility (especially when combined with version specifications). These in turn facilitate, for example, making reprexes for debugging.</p>
</div>
<div class="section level1">
<h1 id="objectives">Objectives<a class="anchor" aria-label="anchor" href="#objectives"></a>
</h1>
<p>Some packages have <em>many</em> package dependencies. Some of them are on CRAN; some are in development and may be hosted elsewhere. Mixing many package dependencies that are constantly evolving creates challenges with standard R package management. For example, what is the best way to move analyses from one machine to another, or set up a series of High Performance Compute nodes? How should we use functions like <code>install.packages</code> in a reproducible workflow that are clearly intended to be used once or very few times? How do we deal with many packages on GitHub that have many common dependencies, but that may point to different branches on a GitHub repository? How do we deal with packages that have dependencies that are no longer on CRAN (“they have been archived”)? How do we replicate an analysis 6 months from now when some packages have changed, and their dependencies have changed?</p>
</div>
<div class="section level1">
<h1 id="require--install">
<code>Require</code> &amp; <code>Install</code>
<a class="anchor" aria-label="anchor" href="#require--install"></a>
</h1>
<p>The <code>Require</code> package provides two “rerun-tolerant” functions, <code>Require</code> and <code>Install</code>. “Rerun-tolerant” means that the results from running this function (the output) will be identical each time, even when the conditions when run are different. This means that if one or more packages is not installed prior to running the function, then the function will determine which are not installed, install those and continue on. If no packages are missing, then it will not install anything. This function uses both RAM and disk caching, so the first time it is run in a new R session will be slower than subsequent times in which cached copies of e.g., the package dependency tree, can be used. “Rerun-tolerant” is a requirement for a robust reproducible workflow; for every “manual” break in code (i.e., a user runs a bit of code, then skips a few lines, then runs more etc.) provides the potential for sections of code to become stale without the user being aware.</p>
<p><code>Install</code> and <code>Require</code> are identical except that <code>Require</code> will also call <code>require</code> (lower case <code>r</code>) on all the named packages with the default setting of <code>require = TRUE</code>.</p>
</div>
<div class="section level1">
<h1 id="converting-to-using-require">Converting to using <code>Require</code>
<a class="anchor" aria-label="anchor" href="#converting-to-using-require"></a>
</h1>
<p>These lines:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span><span class="op">)</span><span class="op">}</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/lme4/lme4/" class="external-link">"lme4"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"lme4"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/lme4/lme4/" class="external-link">"lme4"</a></span><span class="op">)</span><span class="op">}</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org" class="external-link">"tidyverse"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org" class="external-link">"tidyverse"</a></span><span class="op">)</span><span class="op">}</span></span></code></pre></div>
<p>become:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://Require.predictiveecology.org">"Require"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Require"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://Require.predictiveecology.org">"Require"</a></span><span class="op">)</span><span class="op">}</span></span>
<span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"lme4"</span>, <span class="st">"tidyverse"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>noting that Require is an extra package, so to be fully reproducible, it needs to be installed first.</p>
<div class="section level2">
<h2 id="other-packages-that-also-install-packages">Other packages that also install packages<a class="anchor" aria-label="anchor" href="#other-packages-that-also-install-packages"></a>
</h2>
<p>The below descriptions are necessarily simple; please go see each package for more details. Below, we highlight some key features that are relevant to this README. <code>Require</code> offers a different way to achieve the features from all 5 of these packages that are necessary to build a unified, organic, yet reproducible approach to package management in one or many projects.</p>
<div class="section level3">
<h3 id="pak">
<code>pak</code><a class="anchor" aria-label="anchor" href="#pak"></a>
</h3>
<p><code>pak</code> focuses on fast installations of <em>current</em> versions of packages on CRAN-like packages and GitHub.com and other similar code-sharing pages. This works well if the objective is to keep current. It is fast.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># These lines</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"lme4"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># become</span></span>
<span><span class="fu">Require</span><span class="fu">::</span><span class="fu"><a href="reference/Require.html">Install</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"lme4"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="renv">
<code>renv</code><a class="anchor" aria-label="anchor" href="#renv"></a>
</h3>
<p><code>renv</code> is a tool to help with a more static package installation process. While it can handle packages that are updated manually by an individual, the key strength is around keeping track of the versions that exist in a project. <code>renv</code> is not intended to expose the code used to install packages. This makes the managing of packages separate from the script that is/are used in the project, i.e., the package script does not contain the necessary information to recreate the package library.</p>
<pre><code><span><span class="fu">renv</span><span class="fu">::</span><span class="fu">snapshot</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># becomes</span></span>
<span><span class="fu">Require</span><span class="fu">::</span><span class="fu"><a href="reference/pkgSnapshot.html">pkgSnapshot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="packrat">
<code>packrat</code><a class="anchor" aria-label="anchor" href="#packrat"></a>
</h3>
<p>This is mostly the predecessor to <code>renv</code>. <code>renv</code> can do everything <code>packrat</code> can do, but better.</p>
</div>
<div class="section level3">
<h3 id="checkpoint">
<code>checkpoint</code><a class="anchor" aria-label="anchor" href="#checkpoint"></a>
</h3>
<p>This approach takes a date as an input and will install all the packages a user wants, from that date. This uses the posit.packagemanager.co servers hosted by Posit.</p>
<pre><code><span><span class="fu">checkpoint</span><span class="op">(</span><span class="st">"2022-11-09"</span><span class="op">)</span></span>
<span><span class="co"># cannot be achieved directly with Require, but</span></span>
<span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"reproducible (==1.2.10)"</span><span class="op">)</span> <span class="co"># which was the version on that date</span></span></code></pre>
</div>
</div>
</div>
<div class="section level1">
<h1 id="package-features">Package features<a class="anchor" aria-label="anchor" href="#package-features"></a>
</h1>
<ul>
<li>reproducible workflows – rerun-tolerant</li>
<li>fast (see one example of timings below)</li>
<li>packages can be on CRAN, CRAN-alikes, or GitHub.com</li>
<li>uses <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code> like base-R</li>
<li>true <em>stand alone</em>, not the folder-based approach used in <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>. For example, if a user e.g., on Windows Home has packages installed in the system folder because admin privileges allows it, setting <code>standAlone = TRUE</code> will ignore those packages and only use the ones in <code>.libPaths()[1]</code>
</li>
<li>can use hierarchical library paths</li>
<li>can take snapshots, keeping version information for reinstallation on another machine/system. See below and <code><a href="reference/pkgSnapshot.html">?pkgSnapshot</a></code>
</li>
<li>can use both binary or source installs; yet overrides a user request where this is likely inappropriate, e.g., <code>Rcpp</code> often fails when installed on Linux from a binary package manager. Spatial packages are similar.</li>
<li>uses a local cache of packages (defaults outside the project, but inside the user’s home) so multiple projects can install packages quickly without re-downloading from the cloud repositories (see <code>RequireOptions()$Require.cachePkgDir</code>)</li>
<li>puts all package installing into a compact form, so it can be placed within the project source code, enhancing reproducibility and transparency</li>
<li>If using the function <code><a href="reference/Require.html">Require::Require</a></code>, runs <code>require</code> on every package, in order, as supplied to <code>packages</code> argument</li>
</ul>
</div>
<div class="section level1">
<h1 id="installing">Installing<a class="anchor" aria-label="anchor" href="#installing"></a>
</h1>
<div class="section level2">
<h2 id="news">News<a class="anchor" aria-label="anchor" href="#news"></a>
</h2>
<p>See updates from latest <a href="https://cran.r-project.org/package=Require" class="external-link">CRAN</a> and <a href="https://github.com/PredictiveEcology/Require/blob/development/NEWS.md" class="external-link">development</a> versions.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="current-release">Current release<a class="anchor" aria-label="anchor" href="#current-release"></a>
</h3>
<p><a href="https://github.com/PredictiveEcology/Require/actions" class="external-link"><img src="https://github.com/PredictiveEcology/Require/workflows/R-CMD-check/badge.svg?branch=master" alt="R build status"></a> <a href="https://app.codecov.io/gh/PredictiveEcology/Require" class="external-link"><img src="https://codecov.io/gh/PredictiveEcology/Require/branch/master/graph/badge.svg" alt="codecov"></a></p>
<p><strong>Install from CRAN:</strong></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Require"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Install development version:</strong></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Installing the development binary (Windows/MacOS)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Require"</span>, repos <span class="op">=</span> <span class="st">"https://predictiveecology.r-universe.dev"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or installing from source</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"PredictiveEcology/Require"</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="development-version">Development version<a class="anchor" aria-label="anchor" href="#development-version"></a>
</h3>
<p><a href="https://github.com/PredictiveEcology/Require/actions" class="external-link"><img src="https://github.com/PredictiveEcology/Require/workflows/R-CMD-check/badge.svg?branch=development" alt="R build status"></a> <a href="https://app.codecov.io/gh/PredictiveEcology/Require" class="external-link"><img src="https://codecov.io/gh/PredictiveEcology/Require/branch/development/graph/badge.svg" alt="codecov"></a></p>
<p><strong>Install from r-universe:</strong></p>
<p>This is a development version of the package:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Require"</span>, repose <span class="op">=</span> <span class="st">"https://predictiveecology.r-universe.dev"</span><span class="op">)</span> </span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p><code>Require</code> is a wrapper around functions <code>utils::install packages</code> and one of the main function to load packages, <code><a href="https://rdrr.io/r/base/library.html" class="external-link">base::require</a></code>. Like <code>install.packages</code>, it is vectorized on package names.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://Require.predictiveecology.org">"Require"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Require"</span><span class="op">)</span><span class="op">}</span> <span class="co"># sadly, Require can't install itself</span></span>
<span><span class="fu">Require</span><span class="fu">::</span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"data.table"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With version numbering, this will install data.table, and also check that the installed </span></span>
<span><span class="co">#    version is greater than 1.12.8; if not, then it will install a newer version</span></span>
<span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"data.table (&gt;=1.12.8)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># vectorized, mixed github and CRAN, mixed version number and not</span></span>
<span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.table (&gt;=1.12.8)"</span>, <span class="st">"PredictiveEcology/quickPlot"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="it-is-fast">It is fast<a class="anchor" aria-label="anchor" href="#it-is-fast"></a>
</h2>
<p><code>Require</code> has been optimized for speed. While <code>pak</code> is fast, in many cases <code>Require</code> is faster. Below, in cases where all packages are already installed, <code>Require</code> is 10x-20x faster, so it can be left in code.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># First time run, </span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="sc">&gt;</span> pkgs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dplyr"</span>, <span class="st">"reproducible"</span>, </span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="sc">+</span>           <span class="st">"PredictiveEcology/SpaDES@development"</span>, <span class="st">"terra"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(pak<span class="sc">::</span><span class="fu">pkg_install</span>(pkgs))</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>✔ Loading metadata database ... done</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>                                                                                         </span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>ℹ No downloads are needed</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>✔ <span class="dv">4</span> pkgs <span class="sc">+</span> <span class="dv">39</span> deps<span class="sc">:</span> kept <span class="dv">40</span> [<span class="fl">6.8</span>s]</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>   <span class="fl">0.79</span>    <span class="fl">0.28</span>    <span class="fl">6.86</span> </span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(Require<span class="sc">::</span><span class="fu">Install</span>(pkgs))</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>  <span class="dv">1</span> packages on GitHub</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>  <span class="dv">3</span> packages on GitHub</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>No packages to install<span class="sc">/</span>update</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>   <span class="fl">0.44</span>    <span class="fl">0.07</span>    <span class="fl">0.51</span> </span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(pak<span class="sc">::</span><span class="fu">pkg_install</span>(pkgs))</span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a>                                                                                          </span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="co"># Second time run within same session</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>ℹ No downloads are needed</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a>✔ <span class="dv">4</span> pkgs <span class="sc">+</span> <span class="dv">39</span> deps<span class="sc">:</span> kept <span class="dv">40</span> [<span class="fl">2.1</span>s]</span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a>   <span class="fl">0.06</span>    <span class="fl">0.04</span>    <span class="fl">2.12</span> </span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(Require<span class="sc">::</span><span class="fu">Install</span>(pkgs))</span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a>No packages to install<span class="sc">/</span>update</span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a>   <span class="fl">0.05</span>    <span class="fl">0.02</span>    <span class="fl">0.06</span> </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="other-features">Other features<a class="anchor" aria-label="anchor" href="#other-features"></a>
</h2>
<div class="section level3">
<h3 id="keeping-it-all-isolated">Keeping it all isolated<a class="anchor" aria-label="anchor" href="#keeping-it-all-isolated"></a>
</h3>
<p>Require can make install to and use from a single directory, so a project can be fully isolated (unlike <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>, which will always see packages in the R_HOME directory)</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Require.predictiveecology.org">Require</a></span><span class="op">)</span></span>
<span><span class="va">projectPackages</span> <span class="op">=</span> <span class="st">"projectPackages"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">projectPackages</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"remotes (&gt;=2.4.0)"</span>, standAlone <span class="op">=</span> <span class="cn">TRUE</span>, libPaths <span class="op">=</span> <span class="va">projectPackages</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="installing-old-package-versions">Installing old package versions<a class="anchor" aria-label="anchor" href="#installing-old-package-versions"></a>
</h3>
<p><code>Require</code> has the functionality of <code>renv</code> and <code>versions</code> in that you can install previous versions. On Windows, it will search for the binary version on MRAN and CRAN Archives. In the same way as above, we can specify maximum or exact package versions.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"fpCompare (&lt;=0.1.0)"</span><span class="op">)</span> <span class="co"># we don't have to know where to get this</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="managing-a-project">Managing a project<a class="anchor" aria-label="anchor" href="#managing-a-project"></a>
</h3>
<p>Because it is vectorized, there can be a long list of packages at the top of a project file, with various sources and version specifications.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/Require.html">Install</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr (==1.1.4)"</span>, <span class="st">"reproducible"</span>, </span>
<span>          <span class="st">"PredictiveEcology/SpaDES@development"</span>, <span class="st">"raster (&gt;=3.1.5)"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="taking-a-snapshot">Taking a snapshot<a class="anchor" aria-label="anchor" href="#taking-a-snapshot"></a>
</h3>
<p>When a system is set up with the correct packages and versions, we can take a snapshot and give that file to another person or machine:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Require.predictiveecology.org">Require</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/pkgSnapshot.html">pkgSnapshot</a></span><span class="op">(</span><span class="st">"mySnapshot.txt"</span>, standAlone <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># to get only the project specific ones</span></span>
<span></span>
<span><span class="co">## move to a new machine, say</span></span>
<span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span>packageVersionFile <span class="op">=</span> <span class="st">"mySnapshot.txt"</span><span class="op">)</span></span></code></pre></div>
<p>The argument <code>packageVersionFile</code> can also be <code>TRUE</code> if the default filename is accepted.</p>
</div>
<div class="section level3">
<h3 id="using-local-package-cache">Using local package cache<a class="anchor" aria-label="anchor" href="#using-local-package-cache"></a>
</h3>
<p>When installing on many machines on a network, having a local cache can speed up installations. By default, this is activated, with a message upon package load as to where the cache folder is. Setting <code>options("Require.cachePkgDir" = "somePath")</code> will move it to that location; or setting <code>options("Require.cachePkgDir" = NULL)</code> will turn caching off. By default, binaries will be saved on Windows. Also by default, binaries will be <em>built</em> on the fly on *nix systems and this binary will be cached for even faster installs later.</p>
</div>
<div class="section level3">
<h3 id="keeping-up-to-date">Keeping up to date<a class="anchor" aria-label="anchor" href="#keeping-up-to-date"></a>
</h3>
<p><code>Require</code> generally does not try to keep packages up to date; instead if defaults to keeping packages sufficiently up to date that they do not violate version requirements. However, <code>Require</code> has 2 mechanisms to keep packages up to date: either as a group using the <code>update = TRUE</code> (or <code>upgrade = TRUE</code>) argument in <code>Require</code> or using the <code>(HEAD)</code> specification for each individual package. Using <code>(HEAD)</code> allows a user to always have the latest version of individual packages, without wholesale updating.</p>
<pre><code><span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"PredictiveEcology/reproducible@development (HEAD)"</span><span class="op">)</span> <span class="co"># will install reproducible if it has change on GitHub.</span></span>
<span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"reproducible"</span>, update <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># will update reproducible and all dependencies</span></span></code></pre>
</div>
</div>
</div>
<div class="section level1">
<h1 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h1>
<p><code>Require</code> package offers a simple package focused around a single function that is “rerun-tolerant”, i.e., it will take sufficiently little time to execute that it can be left in your script so it is run every time, even for ongoing work. The package has two dependencies (<code>data.table</code> and <code>sys</code>) and so can be used to install packages without interfering with itself.</p>
<div class="section level2">
<h2 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h2>
<p>Please see <code>CONTRIBUTING.md</code> for information on how to contribute to this project.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=Require" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/PredictiveEcology/Require/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/PredictiveEcology/Require/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing Require</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Eliot J B McIntire <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6914-8316" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eliot J B McIntire.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
