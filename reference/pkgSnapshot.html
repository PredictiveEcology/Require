<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Take a snapshot of all the packages and version numbers — pkgSnapshot • Require</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Take a snapshot of all the packages and version numbers — pkgSnapshot"><meta name="description" content="This can be used later by Require to install or re-install the correct versions. See examples."><meta property="og:description" content="This can be used later by Require to install or re-install the correct versions. See examples."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Require</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/Require.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PredictiveEcology/Require/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Take a snapshot of all the packages and version numbers</h1>
      <small class="dont-index">Source: <a href="https://github.com/PredictiveEcology/Require/blob/master/R/pkgSnapshot.R" class="external-link"><code>R/pkgSnapshot.R</code></a></small>
      <div class="d-none name"><code>pkgSnapshot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This can be used later by <code>Require</code> to install or re-install the correct versions. See examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pkgSnapshot</span><span class="op">(</span></span>
<span>  packageVersionFile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.packageVersionFile"</span><span class="op">)</span>,</span>
<span>  libPaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  standAlone <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  purge <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.purge"</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  exact <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  includeBase <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.verbose"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pkgSnapshot2</span><span class="op">(</span></span>
<span>  packageVersionFile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.packageVersionFile"</span><span class="op">)</span>,</span>
<span>  <span class="va">libPaths</span>,</span>
<span>  standAlone <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  purge <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.purge"</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  exact <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  includeBase <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.verbose"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-packageversionfile">packageVersionFile<a class="anchor" aria-label="anchor" href="#arg-packageversionfile"></a></dt>
<dd><p>A filename to save the packages and their currently
installed version numbers. Defaults to <code>"packageVersions.txt"</code>.
If this is specified to be <code>NULL</code>, the function will return the exact
<code>Require</code> call needed to install all the packages at their current
versions. This can be useful to add to a script to allow for reproducibility of
a script.</p></dd>


<dt id="arg-libpaths">libPaths<a class="anchor" aria-label="anchor" href="#arg-libpaths"></a></dt>
<dd><p>The path to the local library where packages are installed.
Defaults to the <code>.libPaths()[1]</code>.</p></dd>


<dt id="arg-standalone">standAlone<a class="anchor" aria-label="anchor" href="#arg-standalone"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, all packages will be installed to and
loaded from the <code>libPaths</code> only. NOTE: If <code>TRUE</code>, THIS WILL CHANGE THE
USER'S <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>, similar to e.g., the <code>checkpoint</code> package. If
<code>FALSE</code>, then <code>libPath</code> will be prepended to <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code> during the
<code>Require</code> call, resulting in shared packages, i.e., it will include the
user's default package folder(s). This can be create dramatically faster
installs if the user has a substantial number of the packages already in
their personal library. Default <code>FALSE</code> to minimize package installing.</p></dd>


<dt id="arg-purge">purge<a class="anchor" aria-label="anchor" href="#arg-purge"></a></dt>
<dd><p>Logical. Should all caches be purged? Default is
<code>getOption("Require.purge", FALSE)</code>. There is a lot of internal caching of
results throughout the <code>Require</code> package. These help with speed and reduce
calls to internet sources. However, sometimes these caches must be purged.
The cached values are renewed when found to be too old, with the age limit.
This maximum age can be set in seconds with the environment variable
<code>R_AVAILABLE_PACKAGES_CACHE_CONTROL_MAX_AGE</code>, or if unset, defaults to 3600
(one hour – see <code><a href="https://rdrr.io/r/utils/available.packages.html" class="external-link">utils::available.packages</a></code>).</p>
<p>Internally, there are calls to <code>available.packages</code>.</p></dd>


<dt id="arg-exact">exact<a class="anchor" aria-label="anchor" href="#arg-exact"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, the default, then for GitHub packages, it
will install the exact SHA, rather than the head of the <code>account/repo@branch</code>. For
CRAN packages, it will install the exact version. If <code>FALSE</code>, then GitHub
packages will identify their branch if that had been specified upon installation,
not a SHA. If the package had been installed with reference to a SHA, then it
will return the SHA as it does not know what branch it came from.
Similarly, CRAN packages will report their version and specify with a <code>&gt;=</code>,
allowing a subsequent user
to install with a minimum version number, as opposed to an exact version number.</p></dd>


<dt id="arg-includebase">includeBase<a class="anchor" aria-label="anchor" href="#arg-includebase"></a></dt>
<dd><p>Logical. Should R base packages be included, specifically,
those in <code>tail(.libPaths(), 1)</code></p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Numeric or logical indicating how verbose should the function
be. If -1 or -2, then as little verbosity as possible. If 0 or FALSE,
then minimal outputs; if <code>1</code> or TRUE, more outputs; <code>2</code> even more. NOTE: in
<code>Require</code> function, when <code>verbose &gt;= 2</code>, also returns details as if
<code>returnDetails = TRUE</code> (for backwards compatibility).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Will both write a file, and (invisibly) return a vector of packages with the
version numbers. This vector can be used directly in <code>Require</code>, though it should likely
be used with <code>require = FALSE</code> to prevent attaching all the packages.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A file is written with the package names and versions of all packages within <code>libPaths</code>.
This can later be passed to <code>Require</code>.</p>
<p><code>pkgSnapshot2</code> returns a vector of package names and versions, with no file output. See
examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">Require</span><span class="fu">:::</span><span class="fu">.runLongExamples</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu">Require</span><span class="fu">:::</span><span class="fu">.setupExample</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># install one archived version so that below does something interesting</span></span></span>
<span class="r-in"><span>  <span class="va">libForThisEx</span> <span class="op">&lt;-</span> <span class="fu"><a href="tempdir2.html">tempdir2</a></span><span class="op">(</span><span class="st">"Example"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="Require.html">Require</a></span><span class="op">(</span><span class="st">"crayon (==1.5.1)"</span>, libPaths <span class="op">=</span> <span class="va">libForThisEx</span>, require <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Normal use -- using the libForThisEx for example;</span></span></span>
<span class="r-in"><span>  <span class="co">#    normally libPaths would be omitted to get all</span></span></span>
<span class="r-in"><span>  <span class="co">#    packages in user or project library</span></span></span>
<span class="r-in"><span>  <span class="va">tf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># writes to getOption("Require.packageVersionFile")</span></span></span>
<span class="r-in"><span>  <span class="co"># within project; also returns a vector</span></span></span>
<span class="r-in"><span>  <span class="co"># of packages with version</span></span></span>
<span class="r-in"><span>  <span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu">pkgSnapshot</span><span class="op">(</span></span></span>
<span class="r-in"><span>    packageVersionFile <span class="op">=</span> <span class="va">tf</span>,</span></span>
<span class="r-in"><span>    libPaths <span class="op">=</span> <span class="va">libForThisEx</span>, standAlone <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># only this library</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Now move this file to another computer e.g. by committing in git,</span></span></span>
<span class="r-in"><span>  <span class="co">#   emailing, googledrive</span></span></span>
<span class="r-in"><span>  <span class="co">#   on next computer/project</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="Require.html">Require</a></span><span class="op">(</span>packageVersionFile <span class="op">=</span> <span class="va">tf</span>, libPaths <span class="op">=</span> <span class="va">libForThisEx</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Using pkgSnapshot2 to get the vector of packages and versions</span></span></span>
<span class="r-in"><span>  <span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu">pkgSnapshot2</span><span class="op">(</span></span></span>
<span class="r-in"><span>    libPaths <span class="op">=</span> <span class="va">libForThisEx</span>, standAlone <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="Require.html">Install</a></span><span class="op">(</span><span class="va">pkgs</span><span class="op">)</span> <span class="co"># will install packages from previous line</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">Require</span><span class="fu">:::</span><span class="fu">.cleanup</span><span class="op">(</span><span class="va">opts</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.packageVersionFile"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eliot J B McIntire.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

